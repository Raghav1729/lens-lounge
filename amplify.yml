version: 1
env:
  variables:
    AWS_ACCESS_KEY_ID: process.env.AMPLIFY_ACCESS_KEY
    AWS_SECRET_ACCESS_KEY: process.env.AMPLIFY_SECRET_ACCESS_KEY
backend:
  phases:
    preBuild:
      commands:
        - yarn install
    build:
      commands:
        - yarn build
    artifacts:
      baseDirectory: public
      files:
        - '**/*'
frontend:
  phases:
    preBuild:
      commands:
        - yarn install
    build:
      commands:
        - yarn run build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*

#
#version: 1
#applications:
#  - appRoot: apps/react-app
#    env:
#      variables:
#        key: value
#    backend:
#      phases:
#        preBuild:
#          commands:
#            - *enter command*
#        build:
#          commands:
#            - *enter command*
#        postBuild:
#          commands:
#            - *enter command*
#    frontend:
#      buildPath: / # Run install and build from the monorepo project root
#      phases:
#        preBuild:
#          commands:
#            - *enter command*
#            - *enter command*
#        build:
#          commands:
#            - *enter command*
#      artifacts:
#        files:
#          - location
#          - location
#        discard-paths: yes
#        baseDirectory: location
#      cache:
#        paths:
#          - path
#          - path
#    test:
#      phases:
#        preTest:
#          commands:
#            - *enter command*
#        test:
#          commands:
#            - *enter command*
#        postTest:
#          commands:
#            - *enter command*
#      artifacts:
#        files:
#          - location
#          - location
#        configFilePath: *location*
#        baseDirectory: *location*